{% extends 'base.html.twig' %}

{% block title %}Hello HomeController!{% endblock %}

{% block body %}
<!-- début header -->
<div class="jumbotron home">
    <div class="text-center">
        <!-- Début navbar searchBiensByTypeTransac -->
        <section>
            <div class="container mt-4 mb-2 p-0">
                <ul class="list-group list-group-horizontal justify-content-between">
                    <a href="{{ path('app_bien') }}" class="btn green" style="font-size: 20px">FONDS DE COMMERCE</a>
                    <a href="{{ path('app_bien_localCommercial') }}" class="btn blue" style="font-size: 20px">LOCAL COMMERCIAL</a>
                    <a href="{{ path('app_bien_immobilierEntreprise') }}" class="btn purple" style="font-size: 20px">IMMOBILIER D'ENTREPRISE</a>
                    <a href="{{ path('app_bien_investissementImmobilier') }}" class="btn orange" style="font-size: 20px">INVESTISSEMENT IMMOBILIER</a>
                </ul>
            </div>
        </section>
        <!-- Début navbar searchBiensByTypeTransac -->
    </div>

    <!-- debut formulaire de recherche -->
    <div class="container">
        <div class="row bg-search p-2">
            <div class="col-md-8">
                {{ form_start(form) }}
                <div class="form-row align-items-end">
                    <div class="col">
                        {{ form_row(form.activite) }}
                        {{ form_row(form.postalCode) }}
                    </div>
                    <div class="col">
                        {{ form_row(form.maxPrice) }}
                        <div id="price-slider"></div>
                        {{ form_row(form.minSurface) }}
                    </div>

                    <div class="col-12">
                        <div class="form-group ">
                            <button class="btn btn-primary">Rechercher</button>
                        </div>
                    </div>
                </div>
                {{ form_end(form) }}
            </div>
            <div class="col-md-1">
                <hr>
            </div>
            <div class="col-md-3">
                {{ form_start(formRef) }}
                <div class="form-row align-items-end">
                    <div class="col">
                        {{ form_row(formRef.numero) }}
                    </div>
                    <div class="col-12">
                        <div class="form-group text-center">
                            <button class="btn btn-primary">Rechercher</button>
                        </div>
                    </div>
                </div>
                {{ form_end(formRef) }}
            </div>
        </div>
    </div>
    <!-- fin  -->
</div>
<!-- fin header -->

<!-- début bien à la une -->
<div class="bg-pattern pt-2 pb-2">
    <div class="container mt-4 white-bg p-3">
        <h2 style="margin-top: 30px; margin-left: 30px"><i class="fa fa-star mr-2"></i><span style="color: #2e383c">Les biens à la une !</span></h2>
        <div class="row">
            <div class="col-md-9">
                <div class="row flex">
                    {% for bien in bienTops %}
                        <div class="col-md-6 p-4">
                            <a href="{{ path('bien_show', {id: bien.id, slug: bien.slug}) }}">
                                <div class="card image-header">

                                    {% if bien.pictfilename1 is not empty %}
                                        <img src="https://gateway.transactium.fr/rep/picts/good/{{ bien.pictfilename1 }}" alt="min_{{ bien.pictfilename1 }}">
                                    {% else %}
                                        <img src="{{ asset('media/image/fondcommerce_cafe.jpg') }}" alt="min_placeholder" class="empty">
                                    {% endif %}

                                    <div class="card-body p-0">
                                        {% if bien.typetransact == 1  %}
                                            <h6 class="card-title card-title-green text-center">
                                                <a class="annonceCardHome" href="{{ path('bien_show', {id: bien.id , slug: bien.slug}) }}">

                                                    {% if bien.titreannonce is not empty %}
                                                        {{ bien.titreannonce }}
                                                    {% else %}
                                                        Contactez-nous !
                                                    {% endif %}
                                                </a>
                                            </h6>
                                            {% elseif bien.typetransact == 4 %}
                                            <h6 class="card-title card-title-blue text-center">
                                                <a class="annonceCardHome" href="{{ path('bien_show', {id: bien.id , slug: bien.slug}) }}">

                                                    {% if bien.titreannonce is not empty %}
                                                        {{ bien.titreannonce }}
                                                    {% else %}
                                                        Contactez-nous !
                                                    {% endif %}
                                                </a>
                                            </h6>
                                            {% elseif bien.typebien == 2 and bien.typetransact == 3  %}
                                                <h6 class="card-title card-title-purple text-center">
                                                    <a class="annonceCardHome" href="{{ path('bien_show', {id: bien.id , slug: bien.slug}) }}">

                                                        {% if bien.titreannonce is not empty %}
                                                            {{ bien.titreannonce }}
                                                        {% else %}
                                                            Contactez-nous !
                                                        {% endif %}
                                                    </a>
                                                </h6>
                                            {% elseif bien.typetransact == 3 and bien.prixpublic > 0  %}
                                                <h6 class="card-title card-title-orange text-center">
                                                    <a class="annonceCardHome" href="{{ path('bien_show', {id: bien.id , slug: bien.slug}) }}">

                                                        {% if bien.titreannonce is not empty %}
                                                            {{ bien.titreannonce }}
                                                        {% else %}
                                                            Contactez-nous !
                                                        {% endif %}
                                                    </a>
                                                </h6>
                                            {% else %}
                                                <h6 class="card-title text-center">
                                                    <a class="annonceCardHome" href="{{ path('bien_show', {id: bien.id , slug: bien.slug}) }}">

                                                        {% if bien.titreannonce is not empty %}
                                                            {{ bien.titreannonce }}
                                                        {% else %}
                                                            Contactez-nous !
                                                        {% endif %}
                                                    </a>
                                                </h6>
                                        {% endif %}


                                        <div class="card-text text-center mb-3">
                                            <i class="fa fa-briefcase mr-2"></i>{{ bien.activite }}
                                        </div>
                                        <div class="card-text text-center mb-3">
                                            <i class="fa fa-map-marker mr-2"></i>{{ bien.codepostal }} - ({{ bien.surfacetotale }} m²)
                                        </div>
                                        {% if bien.typetransact == 1 %}
                                            <div class="prixAnnonce card-title-green text-center">
                                                {% if bien.prixpublic != 0 %}
                                                    {{ bien.formattedPrice }} € FAI*
                                                {% else %}
                                                    {{ bien.loyerannuel }} € HT / AN
                                                {% endif %}
                                            </div>
                                            {% elseif bien.typetransact == 4 %}
                                            <div class="prixAnnonce card-title-blue text-center">
                                                {% if bien.prixpublic != 0 %}
                                                    {{ bien.formattedPrice }} € FAI*
                                                {% else %}
                                                    {{ bien.loyerannuel }} € HT / AN
                                                {% endif %}
                                            </div>
                                            {% elseif bien.typeBien == 2 %}
                                            <div class="prixAnnonce card-title-purple text-center">
                                                {% if bien.prixpublic != 0 %}
                                                    {{ bien.formattedPrice }} € FAI*
                                                {% else %}
                                                    {{ bien.loyerannuel }} € HT / AN
                                                {% endif %}
                                            </div>
                                            {% elseif  bien.typetransact == 3 and (bien.typebien == 1 or bien.typebien == 2) %}
                                                <div class="prixAnnonce card-title-orange text-center">
                                                    {% if bien.prixpublic != 0 %}
                                                        {{ bien.formattedPrice }} € FAI*
                                                    {% else %}
                                                        {{ bien.loyerannuel }} € HT / AN
                                                    {% endif %}
                                                </div>
                                            {% else %}
                                                <div class="prixAnnonce text-center">
                                                    {% if bien.prixpublic != 0 %}
                                                        {{ bien.formattedPrice }} € FAI*
                                                    {% else %}
                                                        {{ bien.loyerannuel }} € HT / AN
                                                    {% endif %}
                                                </div>
                                        {% endif %}

                                    </div>

                                </div>
                            </a>
                        </div>
                    {% endfor %}
                </div>
            </div>
            <div class="col-md-3">
                <div class="backgroundSidebare">
                    {% include 'home/partials/sidebare.html.twig' %}
                </div>

            </div>

        </div>

    </div>
</div>
<!-- fin bien à la une -->

<!-- début dernier biens ajoutés -->
    <div class="dernier_bien_ajoute pt-2 pb-2">
        <div class="container">
            <h2><i class="fas fa-history mr-2"></i>Les derniers biens ajouté !</h2>
            <div class="row">
                    <div class="row flex">
                        {% for bien in biensLatest %}
                            <div class="col-md-4 mt-4 p-4">
                                <a href="{{ path('bien_show', {id: bien.id, slug: bien.slug}) }}">
                                    <div class="card image-header">

                                        {% if bien.pictfilename1 is not empty %}
                                            <img src="https://gateway.transactium.fr/rep/picts/good/{{ bien.pictfilename1 }}" alt="min_{{ bien.pictfilename1 }}">
                                        {% else %}
                                            <img src="{{ asset('media/image/placeholder.png') }}" alt="min_placeholder" class="empty">
                                        {% endif %}

                                        <div class="card-body p-0">
                                            {% if  bien.typetransact == 4 %}
                                                <h6 class="card-title-blue text-center">
                                                    <a class="annonceCardHome" href="{{ path('bien_show', {id: bien.id , slug: bien.slug}) }}">

                                                        {% if bien.titreannonce is not empty %}
                                                            {{ bien.titreannonce }}
                                                        {% else %}
                                                            Contactez-nous !
                                                        {% endif %}
                                                    </a>
                                                </h6>
                                            {% elseif bien.typebien == 2 %}
                                                <h6 class="card-title-purple text-center">
                                                    <a class="annonceCardHome" href="{{ path('bien_show', {id: bien.id , slug: bien.slug}) }}">

                                                        {% if bien.titreannonce is not empty %}
                                                            {{ bien.titreannonce }}
                                                        {% else %}
                                                            Contactez-nous !
                                                        {% endif %}
                                                    </a>
                                                </h6>
                                            {% elseif bien.typetransact == 1 %}
                                                <h6 class="card-title-green text-center">
                                                    <a class="annonceCardHome" href="{{ path('bien_show', {id: bien.id , slug: bien.slug}) }}">

                                                        {% if bien.titreannonce is not empty %}
                                                            {{ bien.titreannonce }}
                                                        {% else %}
                                                            Contactez-nous !
                                                        {% endif %}
                                                    </a>
                                                </h6>
                                            {% else %}
                                                <h6 class="card-title-orange text-center">
                                                    <a class="annonceCardHome" href="{{ path('bien_show', {id: bien.id , slug: bien.slug}) }}">

                                                        {% if bien.titreannonce is not empty %}
                                                            {{ bien.titreannonce }}
                                                        {% else %}
                                                            Contactez-nous !
                                                        {% endif %}
                                                    </a>
                                                </h6>
                                            {% endif %}
                                            <div class="card-text text-center mb-3">
                                                <i class="fa fa-briefcase mr-2"></i>{{ bien.activite }}
                                            </div>
                                            <div class="card-text text-center mb-3">
                                                <i class="fa fa-map-marker mr-2"></i>{{ bien.codepostal }} - ({{ bien.surfacetotale }} m²)
                                            </div>
                                            {% if bien.typetransact == 1 %}
                                                <div class="prixAnnonce card-title-green text-center">
                                                    {% if bien.prixpublic != 0 %}
                                                        {{ bien.formattedPrice }} € FAI*
                                                    {% else %}
                                                        {{ bien.loyerannuel }} € HT / AN
                                                    {% endif %}
                                                </div>
                                            {% elseif bien.typetransact == 4 %}
                                                <div class="prixAnnonce card-title-blue text-center">
                                                    {% if bien.prixpublic != 0 %}
                                                        {{ bien.formattedPrice }} € FAI*
                                                    {% else %}
                                                        {{ bien.loyerannuel }} € HT / AN
                                                    {% endif %}
                                                </div>
                                            {% elseif bien.typeBien == 2 %}
                                                <div class="prixAnnonce card-title-purple text-center">
                                                    {% if bien.prixpublic != 0 %}
                                                        {{ bien.formattedPrice }} € FAI*
                                                    {% else %}
                                                        {{ bien.loyerannuel }} € HT / AN
                                                    {% endif %}
                                                </div>
                                            {% elseif  bien.typetransact == 3 and (bien.typebien == 1 or bien.typebien == 2) %}
                                                <div class="prixAnnonce card-title-orange text-center">
                                                    {% if bien.prixpublic != 0 %}
                                                        {{ bien.formattedPrice }} € FAI*
                                                    {% else %}
                                                        {{ bien.loyerannuel }} € HT / AN
                                                    {% endif %}
                                                </div>
                                            {% else %}
                                                <div class="prixAnnonce text-center">
                                                    {% if bien.prixpublic != 0 %}
                                                        {{ bien.formattedPrice }} € FAI*
                                                    {% else %}
                                                        {{ bien.loyerannuel }} € HT / AN
                                                    {% endif %}
                                                </div>
                                            {% endif %}
                                        </div>

                                    </div>
                                </a>
                            </div>
                        {% endfor %}
                    </div>
            </div>

        </div>
    </div>
<!-- fin dernier biens ajouté -->

    <!-- Début il nous ont fait confiance -->
        <div class="bien-vendu mt-4 pt-2 pb-2">
            <div class="container mt-4">
                <h2><i class="fas fa-handshake mr-2"></i>Ils nous ont fait confiance !</h2>
                <div class="row flex">
                    {% for bien in bienSold  %}
                        <div class="col-md-3 mt-4">
                            <a href="{{ path('bien_show', {id: bien.id, slug: bien.slug}) }}">
                                <div class="card">
                                    {% if bien.phototransaction is not empty %}
                                        <img src="https://gateway.transactium.fr/rep/picts/good/{{ bien.phototransaction }}" alt="min_{{ bien.phototransaction }}">
                                    {% else %}
                                        <img src="{{ asset('media/image/placeholder.png') }}" alt="min_placeholder" class="empty">
                                    {% endif %}
                                    <div class="card-body p-0">
                                        <p class="card-title text-center">
                                            <a class="annonceCardHome" href="{{ path('bien_show', {id: bien.id , slug: bien.slug}) }}">{{ bien.nouvelleenseigne }}</a>
                                        </p>
                                        <p class="card-text"><i class="fa fa-map-marker mr-2"></i>{{ bien.notenouvelleenseigne }}</p>
                                        <p class="card-text"><i class="fa fa-map-marker mr-2"></i>{{ bien.nomvoie }}</p>
                                        <p class="card-text"><i class="fa fa-map-marker mr-2"></i>{{ bien.codepostal }} {{ bien.ville }}</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>


{% endblock %}
